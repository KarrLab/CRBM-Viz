<div class="spinner-container full-height has-breadcrumbs" *ngIf="(loaded$ | async) !== true">
  <biosimulations-spinner></biosimulations-spinner>
</div>

<biosimulations-tab-page *ngIf="(loaded$ | async) === true">
  <!-- The overview tab for the entire project-->
  <biosimulations-tab-page-tab heading="Overview" icon="overview">
    <ng-container *ngIf="projectMetadata$ | async as projectMetadata">
      <ng-container *ngIf="simulationRun$ | async as simulationRun">
        <biosimulations-project-overview 
          [projectMetadata]="projectMetadata"
          [simulationRun]="simulationRun"
        >
        </biosimulations-project-overview>
      </ng-container>
    </ng-container>
  </biosimulations-tab-page-tab>
  <!-- End overview tab-->

  <!--Information about files in project and generated from the project-->
  <biosimulations-tab-page-tab
    heading="Files"
    icon="project"
    urlHashFragment="files"    
  >
    <div class="partial-width files">
      <biosimulations-text-page-content-section heading="Project" *ngIf="projectFiles$ | async as files">
        <biosimulations-project-files id="content"
          [files]="files"
        >
        </biosimulations-project-files>
      </biosimulations-text-page-content-section>

      <biosimulations-text-page-content-section heading="Project contents" *ngIf="files$ | async as files">
        <biosimulations-project-files id="content"
          [files]="files"
        >
        </biosimulations-project-files>
      </biosimulations-text-page-content-section>

      <biosimulations-text-page-content-section heading="Simulation outputs" *ngIf="outputs$ | async as files">
        <biosimulations-project-files id="content"
          [files]="files"
        >
        </biosimulations-project-files>
      </biosimulations-text-page-content-section>
    </div>
  </biosimulations-tab-page-tab>

  <!--A tab for each vega spec present in the project-->
  <ng-container *ngIf="vegaSpecs$ | async as specs">
    <ng-container *ngFor="let spec of specs; let i = index">
      <biosimulations-tab-page-tab
        [urlHashFragment]="spec.path"
        heading="{{ spec.path || 'Figure ' + (i + 1) + '/' + specs.length }}"
        icon="chart"
      >
        <biosimulations-project-figure
          [figure]="spec"
          [sedDocumentsConfiguration]="files$ | async"
        >
        </biosimulations-project-figure>
      </biosimulations-tab-page-tab>
    </ng-container>
  </ng-container>
  <!-- End visualizations of figures-->
</biosimulations-tab-page>
