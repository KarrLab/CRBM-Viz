<div
  class="spinner-container full-height has-breadcrumbs"
  *ngIf="(loaded$ | async) !== true"
>
  <biosimulations-spinner></biosimulations-spinner>
</div>

<biosimulations-tab-page
  *ngIf="(loaded$ | async) === true"
  [selectedTabIndex]="selectedTabIndex"
  (selectedTabChange)="selectedTabChange($event)"
>
  <!-- Begin summary of the run -->
  <biosimulations-tab-page-tab heading="Simulation run" icon="overview">
    <ng-container *ngIf="formattedSimulation$ | async as formattedSimulation">
      <biosimulations-simulation-run-overview
        [simulation]="formattedSimulation"
      >
      </biosimulations-simulation-run-overview>
    </ng-container>
  </biosimulations-tab-page-tab>
  <!-- End summary of the run -->

  <!-- The overview tab for the entire project-->
  <biosimulations-tab-page-tab
    heading="Simulation project"
    icon="model"
    [disabled]="(resultsLoaded$ | async) !== true"
  >
    <ng-container *ngIf="projectMetadata$ | async as projectMetadata">
      <biosimulations-project-metadata [project]="projectMetadata">
      </biosimulations-project-metadata>
    </ng-container>
  </biosimulations-tab-page-tab>
  <!-- End overview tab-->

  <!--Information about files in project and generated from the project-->
  <biosimulations-tab-page-tab
    heading="Files"
    icon="project"
    urlHashFragment="files"
  >
    <div class="partial-width files">
      <biosimulations-text-page-content-section
        heading="Project"
        *ngIf="projectFiles$ | async as files"
      >
        <biosimulations-project-files
          id="content"
          [files]="files"
          [usesMaster]="false"
        >
        </biosimulations-project-files>
      </biosimulations-text-page-content-section>

      <biosimulations-text-page-content-section
        heading="Project contents"
        *ngIf="files$ | async as files"
      >
        <biosimulations-project-files
          id="content"
          [files]="files"
          [usesMaster]="true"
        >
        </biosimulations-project-files>
      </biosimulations-text-page-content-section>

      <biosimulations-text-page-content-section
        heading="Simulation outputs"
        *ngIf="outputs$ | async as files"
      >
        <biosimulations-project-files
          id="content"
          [files]="files"
          [usesMaster]="false"
        >
        </biosimulations-project-files>
      </biosimulations-text-page-content-section>
    </div>
  </biosimulations-tab-page-tab>

  <!-- Visualizations -->
  <biosimulations-tab-page-tab
    urlHashFragment="select-viz"
    heading="Select chart"
    icon="write"
    [partialWidth]="true"
    [disabled]="(resultsLoaded$ | async) !== true"
  >
    <ng-container *ngIf="visualizations$ | async as visualizations">
      <biosimulations-project-select-visualization
        [visualizations]="visualizations"
        (renderVisualization)="renderVisualization($event)"
      >
      </biosimulations-project-select-visualization>
    </ng-container>
  </biosimulations-tab-page-tab>

  <biosimulations-tab-page-tab
    urlHashFragment="viz"
    heading="View chart"
    icon="chart"
    [disabled]="viewVisualizationTabDisabled"
    [fullHeight]="true"
    [fullWidth]="true"
  >
    <biosimulations-project-visualization
      *ngIf="visualization"
      [visualization]="visualization"
    >
    </biosimulations-project-visualization>
  </biosimulations-tab-page-tab>
  <!-- End visualizations -->

  <!-- Begin logs -->
  <biosimulations-tab-page-tab
    heading="Log"
    icon="logs"
    urlHashFragment="log"
    [disabled]="(resultsLoaded$ | async) !== true"
  >
    <ng-container *ngIf="logs$ | async as logs">
      <ng-container *ngIf="formattedSimulation$ | async as sim">
        <biosimulations-simulation-log
          [status]="sim.status"
          [rawLog]="logs.raw"
          [structuredLog]="logs.structured"
        >
        </biosimulations-simulation-log>
      </ng-container>
    </ng-container>
  </biosimulations-tab-page-tab>
  <!-- End logs -->
</biosimulations-tab-page>
